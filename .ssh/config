# vim:ft=sshconfig

CanonicalizeHostname yes
CanonicalDomains m45.me almg.uucp almg.rede almg.gov.br local
CanonicalizeMaxDots 0
CanonicalizeFallbackLocal yes

Match originalhost "e????,sisap*,sweb*,*.almg.rede,*.almg.uucp,*.almg.gov.br" exec "test $HOSTNAME -eq e8099"
        ForwardX11 yes
        ForwardX11Trusted yes
        IdentityFile ~/.ssh/almg/id_rsa

Match originalhost "e????,sisap*,sweb*,*.almg.rede,*.almg.uucp,*.almg.gov.br" exec "test $HOSTNAME -ne e8099"
        ForwardX11 yes
        ForwardX11Trusted yes
        IdentityFile ~/.ssh/almg/id_rsa
        ProxyJump me-tunnel

Match originalhost oo exec "test $HOSTNAME -eq constitution"
        HostName constitution

Match originalhost oo exec "test $HOSTNAME -ne constitution"
        HostName mississipi

Match originalhost me-tunnel exec "test $HOSTNAME -eq e8099"
        HostName m45.me
        User ubuntu
        IdentityFile ~/.ssh/id_aws.pem
        ForwardX11 no
        RequestTTY no
        PasswordAuthentication no
        # 1xxxx => xxxx RemoteForward
        RemoteForward 10080 localhost:80
        RemoteForward 10443 localhost:443
        RemoteForward 13306 localhost:3306
        RemoteForward 10022 localhost:10022

Match originalhost me-tunnel exec "test $HOSTNAME -ne e8099"
        HostName m45.me
        User ubuntu
        IdentityFile ~/.ssh/id_aws.pem
        ForwardX11 no
        PasswordAuthentication no
        RequestTTY no

Match originalhost almg
        ProxyJump me
        Port 10022
        HostName localhost
        User h
        IdentityFile ~/.ssh/almg/id_rsa
        ForwardX11 yes
        ForwardX11Trusted yes


#
# Defaults
#

Host *
        Compression yes
        ServerAliveInterval 5
        ServerAliveCountMax 2

Host m45.me me
        HostName m45.me
        User ubuntu
        IdentityFile ~/.ssh/id_aws.pem

Host github github.com
        HostName github.com
        User git
        ForwardX11 no
        RequestTTY no
        PasswordAuthentication no
        IdentityFile ~/.ssh/id_rsa

Host gitlab gitlab.almg.uucp
        HostName gitlab
        User git
        ForwardX11 no
        RequestTTY no
        PasswordAuthentication no

Host sweb sisap-backend sisap-backend.almg.uucp
        HostName sisap-backend.almg.uucp
        IdentityFile ~/.ssh/almg/id_rsa
        User ggov

Host swebh sisaph-backend sisap sisap sisap.almg.uucp
        HostName sisap.almg.uucp
        IdentityFile ~/.ssh/almg/id_rsa
        User ggov

