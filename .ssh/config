# vim:ft=sshconfig

CanonicalizeHostname yes
CanonicalDomains m45.me almg.uucp almg.rede almg.gov.br local
CanonicalizeMaxDots 0
CanonicalizeFallbackLocal yes

#
# Defaults
#

Host *
        Compression yes
        ServerAliveInterval 5
        ServerAliveCountMax 2
        IdentityFile ~/.ssh/almg/id_rsa

Host *.local
        IdentityFile ~/.ssh/id_rsa

Host m45.me me
        Hostname m45.me
        User ubuntu
        IdentityFile ~/.ssh/id_aws.pem

Host me-tunnel
        Hostname m45.me
        BatchMode yes
        ForwardX11 no
        RequestTTY no
        PasswordAuthentication no

Match originalhost me-tunnel exec "[[ $(hostname) == e4002805 ]]"
        RemoteForward 10022 *:10022

Host almg
        ProxyJump me-tunnel
        Hostname localhost
        Port 10022
        User h

Host sisap-backend.almg.uucp sisap-backend sweb
        Hostname sisap-backend
        User ggov

Host sisap.almg.uucp sisap sisaph-backend swebh
        Hostname sisap
        User ggov

Host github.com github gh
        hostname github.com
        User git
        IdentityFile ~/.ssh/id_rsa

Match originalhost oo exec "[[ $(hostname) != constitution ]]"
        HostName constitution

Match originalhost oo
        Hostname mississipi

